/**
 * skylark-poxp - A version of poxp that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-poxp/
 * @license MIT
 */
define(["./poxp"],function(t){var e={create:function(t){var r=new e.obj;if(void 0!==t)for(var i in t)r[i]=t[i];return r},obj:function(){this.prop={},this._elem={},this._check={},this._func={},this._tobjs={}},_getobj:function(t,e){var r;return e||(e=document),"string"==typeof t?(1==(r=e.querySelectorAll(t)).length&&(r=r[0]),0==r.length&&(r=null)):r=t,r},_getval:function(t){var e=t.value;if("checkbox"==t.type&&(e=t.checked),"select-multiple"==t.type){var r=t.querySelectorAll("option");e=[];for(var i=0;i<r.length;i++)r[i].selected&&e.push(r[i].value)}return"range"==t.type&&(e=parseFloat(e)),"file"==t.type&&(e=t.files),e}};return e.obj.prototype.bindHtml=function(t,r,i){var n=e._getobj(r);return n?(this._elem[t]=n,i||(i={}),this._func[t]=i,Object.defineProperty(this,t,{configurable:!0,get:function(){return n instanceof NodeList||Array.isArray(n)?this.prop[t]=n[0].innerHTML:this.prop[t]=n.innerHTML,this.prop[t]},set:function(e){if(this._func[t].set&&(e=this._func[t].set(e)),this.prop[t]=e,n instanceof NodeList||Array.isArray(n))for(var r=0;r<n.length;r++)this._elem[t][r].innerHTML=e;else this._elem[t].innerHTML=e}}),n instanceof NodeList||Array.isArray(n)?this.prop[t]=n[0].innerHTML:this.prop[t]=n.innerHTML,this):this},e.obj.prototype.bindStyle=function(t,r,i,n){var o=e._getobj(r);return o?(this._elem[t]=o,n||(n={}),this._func[t]=n,Object.defineProperty(this,t,{configurable:!0,get:function(){return o instanceof NodeList||Array.isArray(o)?this.prop[t]=o[0].style[i]:this.prop[t]=o.style[i],this.prop[t]},set:function(e){if(this._func[t].set&&(e=this._func[t].set(e)),this.prop[t]=e,o instanceof NodeList||Array.isArray(o))for(var r=0;r<o.length;r++)this._elem[t][r].style[i]=e;else this._elem[t].style[i]=e}}),o instanceof NodeList||Array.isArray(o)?this.prop[t]=o[0].style[i]:this.prop[t]=o.style[i],this):this},e.obj.prototype.bindAttr=function(t,r,i,n){var o=e._getobj(r);return o?(this._elem[t]=o,n||(n={}),this._func[t]=n,Object.defineProperty(this,t,{configurable:!0,get:function(){return o instanceof NodeList||Array.isArray(o)?this.prop[t]=o[0].getAttribute(i):this.prop[t]=o.getAttribute(i),this.prop[t]},set:function(e){if(this._func[t].set&&(e=this._func[t].set(e)),this.prop[t]=e,o instanceof NodeList||Array.isArray(o))for(var r=0;r<o.length;r++)this._elem[t][r].setAttribute(i,e);else this._elem[t].setAttribute(i,e)}}),o instanceof NodeList||Array.isArray(o)?this.prop[t]=o[0].getAttribute(i):this.prop[t]=o.getAttribute(i),this):this},e.obj.prototype.bindInput=function(t,r,i){var n=e._getobj(r);if(!n)return this;i||(i={}),this._func[t]=i,(n instanceof NodeList||Array.isArray(n))&&"checkbox"!=n[0].type&&"radio"!=n[0].type&&(n=n[0]);var o=void 0!=this.prop[t];this._elem[t]=n,Object.defineProperty(this,t,{configurable:!0,get:function(){var e=f(t);return this._func[t].get&&(e=this._func[t].get(e)),e},set:function(e){this._func[t].set&&(e=this._func[t].set(e)),this.prop[t]=e,function(t,e){var r=s._elem[t];if(r instanceof NodeList||Array.isArray(r)){if("radio"==r[0].type)for(var i=0;i<r.length;i++)r[i].value==e&&(r[i].checked=!0);else if("checkbox"==r[0].type){for(var n={},i=0;i<e.length;i++)n[e[i]]=!0;for(var i=0;i<r.length;i++)r[i].checked=n[r[i].value];s._check[t]=n}}else if("checkbox"==r.type)r.checked=e;else if("select-multiple"==r.type)for(var o=r.querySelectorAll("option"),i=0;i<o.length;i++){o[i].selected=!1;for(var c=0;c<e.length;c++)o[i].value==e[c]&&(o[i].selected=!0)}else"file"==r.type||(r.value=e)}(t,e),this._func[t].change&&this._func[t].change(f(t)),this._func[t].input&&this._func[t].input(f(t))}});var s=this,c=null;if(n instanceof NodeList||Array.isArray(n)){"checkbox"==n[0].type&&(s._check[t]={});for(var a=0;a<n.length;a++)"object"==typeof n[a]&&(o||n[a].addEventListener("change",function(r){var i;"checkbox"==this.type?(s._check[t][this.value]=this.checked,i=f(t)):i=this.value,s.prop[t]=i,s._func[t].get&&(i=s._func[t].get(i)),e.log("get "+t+"="+i),s._func[t].change&&s._func[t].change(i)}),"radio"==n[a].type&&n[a].checked?c=n[a].value:"checkbox"==n[a].type&&(s._check[t][n[a].value]=n[a].checked));"checkbox"==n[0].type&&(c=f(t))}else c=e._getval(n),o||n.addEventListener("change",function(r){var i=e._getval(this);s.prop[t]=i,s._func[t].get&&(i=s._func[t].get(i)),s._func[t].change&&s._func[t].change(i)}),o||n.addEventListener("input",function(r){var i=e._getval(this);s.prop[t]=i,s._func[t].get&&(i=s._func[t].get(i)),s._func[t].input&&s._func[t].input(i)});function f(t){var e;if(s._check[t]){for(var r in e=[],s._check[t])s._check[t][r]&&e.push(r);s.prop[t]=e}else e=s.prop[t];return e}return this._func[t].get&&(c=this._func[t].get(c)),this.prop[t]=c,s._func[t].input&&this._func[t].input(c),s._func[t].change&&this._func[t].change(c),this},e.obj.prototype.getCheck=function(t){return this._check[t]},e.obj.prototype.setFunc=function(t,r){for(var i in r)this._func[t][i]=r[i];var n=e._getval(this._elem[t]);return this._func[t].get&&(n=this._func[t].get(n)),this.prop[t]=n,this._func[t]},e.obj.prototype.bindAllInput=function(t){t||(t=document);for(var e=t.querySelectorAll("input,select,textarea"),r={},i=0;i<e.length;i++){var n=e[i].name;r[n]?Array.isArray(r[n])?r[n].push(e[i]):r[n]=[r[n],e[i]]:r[n]=e[i]}for(var i in r)this.bindInput(i,r[i]);return r},e.obj.prototype.bindAll=function(t,e){null==e&&(e=document);for(var r=e.querySelectorAll(t),i=0;i<r.length;i++){var n=r[i].getAttribute("data-bind");"INPUT"==r[i].tagName||"SELECT"==r[i].tagName?this.bindInput(n,r[i]):this.bindHtml(n,r[i])}},e.obj.prototype.setTimer=function(t,e,r,i){if(Array.isArray(e))return this.setTimerM(t,e);var n;i||(i={});if(n=i.from?i.from:this[t],isNaN(n)&&(n.match(/^([0-9\-\.]+)(.*)$/)?(n=parseFloat(RegExp.$1),i.sfx=RegExp.$2):n=0),n==e)return this;var o=0;i.delay&&(o=i.delay);var s=(new Date).getTime(),c={from:n,to:e,st:s+o,et:s+o+r,opt:i};return this._tobjs[t]={tl:[c],tc:0},this},e.obj.prototype.setTimerM=function(t,e){for(var r=[],i=(new Date).getTime(),n=this[t],o=0;o<e.length;o++){var s=e[o].to,c=e[o].time,a=e[o].opt;a||(a={});isNaN(n)&&(n.match(/^([0-9\-\.]+)(.*)$/)?(n=parseFloat(RegExp.$1),a.sfx=RegExp.$2):n=0);var f=0;a.delay&&(f=a.delay),r.push({from:n,to:s,st:i+f,et:i+f+c,opt:a}),n=s}return this._tobjs[t]={tl:r,tc:0},console.log(r),this},e.obj.prototype.clearTimer=function(t){delete this._tobjs[t]},e.obj.prototype.updateTimer=function(){var t=(new Date).getTime();for(var e in this._tobjs){var r=this._tobjs[e],i=r.tl[r.tc];if(void 0!==i&&!(i.st>t))if(i.et<=t){var n=i.to;i.opt.sfx&&(n+=i.opt.sfx),this[e]=n,r.tc++,this._tobjs[e].tl.length<r.tc&&delete this._tobjs[e],i.opt.efunc&&i.opt.efunc(i.to)}else{var o=(t-i.st)/(i.et-i.st);if(i.opt.tfunc)if("string"==typeof i.opt.tfunc)switch(i.opt.tfunc){case"ease-in":o*=o;break;case"ease-out":o*=2-o;break;case"ease-inout":o=o*o*(3-2*o)}else o=i.opt.tfunc(o);n=i.from+(i.to-i.from)*o;i.opt.sfx&&(n+=i.opt.sfx),this[e]=n}}},e.log=function(t){console.log(t)},e.addev=function(t,r,i,n){var o=e._getobj(t,n);if(o){o instanceof NodeList||Array.isArray(o)||(o=[o]);for(var s=0;s<o.length;s++)o[s].addEventListener(r,function(t){i(t)||t.preventDefault()})}},e.set=function(t,r){r||(r=document),t instanceof Array||(t=[t]);for(var i=0;i<t.length;i++){var n,o=t[i];if(o.obj&&(n=e._getobj(o.obj,r)),o.id&&(n=r.getElementById(o.id)),o.sel&&(n=r.querySelectorAll(o.sel)),n){n instanceof NodeList||Array.isArray(n)||(n=[n]);for(var c=0;c<n.length;c++)if(void 0!=o.html&&(n[c].innerHTML=o.html),void 0!=o.value&&(n[c].value=o.value),void 0!=o.attr&&n[c].setAttribute(o.attr,o.value),void 0!=o.style)for(s in o.style)n[c].style[s]=o.style[s]}}},t.WBind=e});
//# sourceMappingURL=sourcemaps/WBind.js.map
