/**
 * skylark-poxp - A version of poxp that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-poxp/
 * @license MIT
 */
define(["./pox"],function(e){return e.Pointer=function(e,t){var n,a,o,u,s,d=this;function r(e){var t,a;return n&&e.touches.length>0?(t=e.touches[0].pageX-e.target.offsetLeft,a=e.touches[0].pageY-e.target.offsetTop):(t=e.offsetX,a=e.offsetY),{x:t,y:a}}function f(f){a||(o||((n="touchstart"==f.type)?(o="touchstart",u="touchend",EV_O="touchcancel",s="touchmove"):(o="mousedown",u="mouseup",EV_O="mouseout",s="mousemove"),e.addEventListener(u,function(e){var n=r(e),a="touchend"==e.type?d.lastd:r(e);d.mf=!1,t.up&&(t.up({x:n.x,y:n.y,ex:a.x,ey:a.y,dx:d.dx,dy:d.dy})||e.preventDefault())},!1),e.addEventListener(EV_O,function(e){d.mf=!1;var n=r(e);t.out&&(t.out({x:n.x,y:n.y,dx:d.dx,dy:d.dy})||e.preventDefault())},!1),e.addEventListener(s,function(e){if(!a){var n=r(e);d.lastd=n,d.mf&&(d.dx=n.x-d.s.x,d.dy=n.y-d.s.y,t.move&&(t.move({x:n.x,y:n.y,ox:n.x,oy:n.y,dx:d.dx,dy:d.dy})||e.preventDefault()))}},!1),first=!1),d.mf=!0,d.dx=d.dy=0,d.s=r(f),d.lastd=d.s,t.down&&(t.down({x:d.s.x,y:d.s.y,sx:d.s.x,sy:d.s.y})||f.preventDefault()))}e.addEventListener("mousedown",f,!1),e.addEventListener("touchstart",f,!1),t.contextmenu&&e.addEventListener("contextmenu",function(e){t.contextmenu({px:e.offsetX,py:e.offsetY})||e.preventDefault()},!1),t.wheel&&e.addEventListener("wheel",function(e){t.wheel(e.deltaY)||e.preventDefault()},!1),t.gesture&&(e.addEventListener("gesturestart",function(e){a=!0,t.gesture(0,0)||e.preventDefault()}),e.addEventListener("gesturechange",function(e){t.gesture(e.scale,e.rotation)||e.preventDefault()}),e.addEventListener("gestureend",function(e){a=!1})),t.gyro&&window.addEventListener("deviceorientation",function(e){var n,a,o,u=window.orientation;switch(n=null,a=null,o=null,u){case 90:e.gamma<0?(n=e.gamma+90,a=180-e.alpha,o=e.beta+180):(n=e.gamma-90,a=360-e.alpha,o=e.beta);break;case-90:e.gamma<0?(n=-e.gamma-90,a=180-e.alpha,o=180-e.beta):(n=90-e.gamma,a=360-e.alpha,o=-e.beta)}t.gyro({rx:n,ry:a,rz:o,orientation:u})})}});
//# sourceMappingURL=sourcemaps/Pointer.js.map
